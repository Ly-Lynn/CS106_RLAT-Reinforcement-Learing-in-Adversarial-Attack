{"ast":null,"code":"import React,{useState}from'react';import{Form,Button,Alert}from'react-bootstrap';import FormSubmitted from'./formSubmitted';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UploadForm=()=>{const[selectedFile,setSelectedFile]=useState(null);const[error,setError]=useState('');const[image,setImage]=useState(null);const[resize,setResize]=useState(null);const[draw,setDraw]=useState(null);const[prediction,setPrediction]=useState('');const handleFileChange=e=>{setSelectedFile(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append('file',selectedFile);try{const response=await axios.post('http://127.0.0.1:8000/predict/',formData,{headers:{'Content-Type':'multipart/form-data'}});setPrediction(response.data.prediction);setImage(\"data:image/png;base64,\".concat(response.data.image));setResize(\"data:image/png;base64,\".concat(response.data.resize_image));setDraw(\"data:image/png;base64,\".concat(response.data.draw_image));setError('');// onFormSubmit();\n}catch(err){console.error('Error fetching prediction:',err);// Log detailed error\nsetError('Failed to fetch prediction. Please try again.',err);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formFile\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Upload Image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:handleFileChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Confirm\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"mt-3\",children:error})]}),image&&/*#__PURE__*/_jsx(FormSubmitted,{image:image,resize:resize,grid:draw,prediction:prediction})]});};export default UploadForm;","map":{"version":3,"names":["React","useState","Form","Button","Alert","FormSubmitted","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UploadForm","selectedFile","setSelectedFile","error","setError","image","setImage","resize","setResize","draw","setDraw","prediction","setPrediction","handleFileChange","e","target","files","handleSubmit","preventDefault","formData","FormData","append","response","post","headers","data","concat","resize_image","draw_image","err","console","children","onSubmit","Group","controlId","className","Label","Control","type","onChange","variant","grid"],"sources":["C:/Users/thuyl/OneDrive - Trường ĐH CNTT - University of Information Technology/My documents/AI/ai-project/frontend/src/frontend/components/form.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Form, Button, Alert } from 'react-bootstrap';\r\nimport FormSubmitted from './formSubmitted';\r\nimport axios from 'axios';\r\n\r\nconst UploadForm = () => {\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [error, setError] = useState('');\r\n    const [image, setImage] = useState(null);\r\n    const [resize, setResize] = useState(null);\r\n    const [draw, setDraw] = useState(null);\r\n    const [prediction, setPrediction] = useState('');\r\n\r\n    const handleFileChange = (e) => {\r\n        setSelectedFile(e.target.files[0]);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('file', selectedFile);\r\n\r\n        try {\r\n            const response = await axios.post('http://127.0.0.1:8000/predict/', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n            setPrediction(response.data.prediction);\r\n            setImage(`data:image/png;base64,${response.data.image}`);\r\n            setResize(`data:image/png;base64,${response.data.resize_image}`);\r\n            setDraw(`data:image/png;base64,${response.data.draw_image}`);\r\n            setError('');\r\n            // onFormSubmit();\r\n        } catch (err) {\r\n            console.error('Error fetching prediction:', err); // Log detailed error\r\n            setError('Failed to fetch prediction. Please try again.', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Form onSubmit={handleSubmit}>\r\n                <Form.Group controlId=\"formFile\" className=\"mb-3\">\r\n                    <Form.Label>Upload Image</Form.Label>\r\n                    <Form.Control type=\"file\" onChange={handleFileChange} />\r\n                </Form.Group>\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                    Confirm\r\n                </Button>\r\n                {error && <Alert variant=\"danger\" className=\"mt-3\">{error}</Alert>}\r\n            </Form>\r\n            {image && <FormSubmitted image={image} resize={resize} grid={draw} prediction={prediction} />}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UploadForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}